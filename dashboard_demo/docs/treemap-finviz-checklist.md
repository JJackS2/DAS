# Finviz 트리맵 대비 반영 요소 체크리스트

[Finviz Stock Market Map](https://finviz.com/published_map.ashx?t=sec_all&st=w4&f=022426&i=sec_all_w4_201455572) 이미지·링크 기준으로 추출한 반영 요소입니다.

---

## 1. 계층별 레이블 영역 (Hierarchical Label Areas)

| 요소 | Finviz | DAS 반영 |
|------|--------|----------|
| **섹터/산업 레이블** | 해당 영역 **상단 가장자리**에 **흰색 글씨 + 어두운 회색 배경**의 전용 스트립 | 상위 계층(지역·법인·국가·제품 L1) `upperLabel`에 **어두운 배경(backgroundColor)** + 흰색 텍스트 |
| **레이블 위치** | 개별 주식 박스가 아닌 **상위 bounding box 상단** | 큰 박스(높이·너비 임계값 이상)에만 상단 레이블 표시 |
| **스타일** | White text on dark grey background | `upperLabel.backgroundColor: '#374151'`, `color: '#fff'`, `fontWeight: 'bold'` |

---

## 2. 색상 인코딩 (Color Scale)

| 요소 | Finviz | DAS 반영 |
|------|--------|----------|
| **색상 의미** | 빨강(음수/하락) → 초록(양수/상승), 연속 스케일 | **0% = 빨강, 100% = 초록** 연속 그라데이션 (연결률/스마트 판매 비율) |
| **농도** | 변동폭이 클수록 진한 색 | 0%~100% 선형 보간 (red → green) |

---

## 3. 색상 스케일 범례 (Color Legend)

| 요소 | Finviz | DAS 반영 |
|------|--------|----------|
| **위치** | 트리맵 **하단** | 트리맵 하단 유지 |
| **형태** | 가로 **연속 그라데이션 막대** | 동일 |
| **수치 표시** | "-10%", "-6.7%", "0", "+3.3%", "+10%" 등 구간 레이블 | "0%", "25%", "50%", "75%", "100%" (빨강→초록 그라데이션에 맞춤) |
| **가시성** | 눈에 띄는 크기·배치 | 범례 박스 크기·패딩 유지, 그라데이션을 빨강→초록으로 변경 |

---

## 4. 개별 노드 레이블 (Leaf / Stock Labels)

| 요소 | Finviz | DAS 반영 |
|------|--------|----------|
| **내용** | 티커 심볼 + **일일 변동률**(예: +9.72%, -16.52%) | 노드명 + **비율**(연결률 등) |
| **비율 색** | 변동률 색이 박스 색과 일치(빨강/초록) | 비율 텍스트 색을 박스(빨강/초록)와 맞춤 |
| **작은 박스** | 매우 작은 박스는 레이블 생략·축약 | 높이·너비 임계값 미만이면 레이블 숨김 (색만 표시) |

---

## 5. 툴팁 (Hover Tooltip)

| 요소 | Finviz | DAS 반영 |
|------|--------|----------|
| **표시 내용** | 종목명, 현재가, **변동률(큰 글씨·색상)** | 이름, 크기(판매/연결 등), **비율(강조·색상)** |
| **추가 정보** | 경쟁사 목록 + 3개월 스파크라인 | (선택) 동일 계층 항목 목록 등 |

---

## 6. 인터랙션 (Zoom / Pan / Click)

| 요소 | Finviz | DAS 반영 |
|------|--------|----------|
| **확대/축소** | "Use mouse wheel to zoom in and out." | `roam: true` → 마우스 휠 zoom |
| **이동** | "Drag zoomed map to pan it." | 확대 후 드래그로 pan |
| **클릭** | 노드 클릭 시 해당 노드로 zoom | `nodeClick: 'zoomToNode'` 유지 |
| **더블클릭** | 상세 정보 새 창 | (선택) 추후 구현 |
| **힌트 문구** | 하단 좌측에 사용법 안내 | 트리맵 하단에 "마우스 휠로 확대/축소, 드래그로 이동" 문구 추가 |

---

## 7. 기타

| 요소 | Finviz | DAS 반영 |
|------|--------|----------|
| **브레드크럼** | 확대 경로 표시 | `breadcrumb: { show: true }` 유지 |
| **크기 인코딩** | 시가총액 등 | 판매/스마트 판매/연결대수 중 선택 |

---

## 구현 우선순위 (이번 반영)

1. ✅ 계층 레이블: **어두운 배경 스트립** (upperLabel.backgroundColor + 흰색)
2. ✅ 색상: **0% 빨강 ~ 100% 초록** 연속 스케일 + 범례 동일 적용
3. ✅ **roam: true** (휠 zoom, 드래그 pan)
4. ✅ 툴팁: 비율 **강조·색상** 표시
5. ✅ 하단 **힌트 텍스트** ("마우스 휠로 확대/축소...")
6. (선택) 리치 툴팁·더블클릭 상세 창
